{"ast":null,"code":"var _jsxFileName = \"/Users/shruthi/Documents/SEM_1/HR-Management-System/Frontend/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport jwt from \"jsonwebtoken\";\nimport Login from \"./component/Login.jsx\";\nimport Temp from \"./component/Temp.jsx\";\nimport NotFound404 from \"./component/NotFound404.jsx\";\nimport DashboardAdmin from \"./component/admin/DashboardAdmin.jsx\";\nimport DashboardHR from \"./component/hr/DashboardHR.jsx\";\nimport DashboardEmployee from \"./component/employee/DashboardEmployee.jsx\";\nimport { Switch } from \"react-router\";\nimport { HashRouter as Router, Route, Link, Redirect, DefaultRoute } from \"react-router-dom\";\nimport history from \"./history.js\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {},\n      loading: false,\n      pass: true,\n      isLogin: false,\n      firstTimeAlert: true\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault(); // console.log(\"id\", event.target[0].value);\n\n      this.setState({\n        pass: true\n      });\n      this.setState({\n        loading: true\n      });\n      this.login(event.target[0].value, event.target[1].value);\n      event.target.reset();\n    };\n\n    this.handleLogout = event => {\n      console.log(\"logout\");\n      localStorage.clear();\n      this.componentDidMount();\n    };\n\n    this.login = (id, pass) => {\n      // history.push('new/path/here/');\n      // history.push('/page');\n      // History.push('/page');\n      // this.context.history.push('/path');\n      //email=admin@fenil.com&password=admin\n      let bodyLogin = {\n        email: id,\n        password: pass\n      }; // let bodyLogin =\"email=\"+id+\"&password=\"+pass;\n      // {Email: id, Password: pass}\n\n      axios.post(\"http://localhost:4000\" + \"/api/login\", bodyLogin).then(res => {\n        // console.log(decodedData.Account);\n        console.log(jwt.decode(res.data));\n        var decodedData = jwt.decode(res.data);\n        localStorage.setItem(\"token\", res.data);\n\n        if ((res == undefined || res == null || decodedData.Account == undefined || decodedData.Account == null) && !(decodedData.Account == 1 || decodedData.Account == 2 || decodedData.Account == 3)) {\n          this.setState({\n            pass: false\n          });\n          this.setState({\n            loading: false\n          });\n        } else {\n          if (decodedData.Account == 1) {\n            // this.setState({ data: decodedData });\n            // localStorage.setItem('data', JSON.stringfy(decodedData));\n            this.setState({\n              pass: true\n            }); // localStorage.setItem('pass', 'true');\n\n            this.setState({\n              loading: false\n            }); // localStorage.setItem('loading', 'false');\n\n            this.setState({\n              isLogin: true\n            });\n            localStorage.setItem(\"isLogin\", true); // localStorage.setItem('isLogin', 'true');\n\n            localStorage.setItem(\"Account\", 1);\n            localStorage.setItem(\"_id\", decodedData[\"_id\"]);\n            localStorage.setItem(\"Name\", decodedData[\"FirstName\"] + \" \" + decodedData[\"LastName\"]);\n            this.componentDidMount();\n            history.push(\"#/admin/role\");\n          }\n\n          if (decodedData.Account == 2) {\n            // this.setState({ data: decodedData });\n            this.setState({\n              pass: true\n            });\n            this.setState({\n              loading: false\n            });\n            this.setState({\n              isLogin: true\n            });\n            localStorage.setItem(\"isLogin\", true);\n            localStorage.setItem(\"Account\", 2);\n            localStorage.setItem(\"_id\", decodedData[\"_id\"]);\n            localStorage.setItem(\"Name\", decodedData[\"FirstName\"] + \" \" + decodedData[\"LastName\"]);\n            this.componentDidMount();\n            history.push(\"#/hr/employee\");\n          }\n\n          if (decodedData.Account == 3) {\n            // this.setState({ data: decodedData });\n            this.setState({\n              pass: true\n            });\n            this.setState({\n              loading: false\n            });\n            this.setState({\n              isLogin: true\n            });\n            localStorage.setItem(\"isLogin\", true);\n            localStorage.setItem(\"Account\", 3);\n            localStorage.setItem(\"_id\", decodedData[\"_id\"]);\n            localStorage.setItem(\"Name\", decodedData[\"FirstName\"] + \" \" + decodedData[\"LastName\"]);\n            this.componentDidMount();\n            history.push(\"#/employee/\" + decodedData._id + \"/personal-info\");\n          }\n        } //  console.log(decodedData);\n        //  console.log(`decodedData.toString()==\"false\" `,decodedData.toString()==\"false\" );\n        //  if(decodedData.toString()==\"false\")\n        //  { console.log(\"1\");\n        //  this.setState({ pass: false })\n        //  this.setState({ loading: false }); ;\n        // }else{\n        //   console.log(\"2\");\n        //   this.setState({ pass: true });\n        //  this.setState({ loading: false });\n        //  this.setState({ data: decodedData});\n        //  this.setState({ isLogin: true });\n        // }\n\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          pass: false\n        });\n        this.setState({\n          loading: false\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      data: {\n        _id: localStorage.getItem(\"_id\") || \"\",\n        Account: localStorage.getItem(\"Account\") || \"\",\n        Name: localStorage.getItem(\"Name\") || \"\"\n      },\n      isLogin: localStorage.getItem(\"isLogin\") == \"true\"\n    }, () => {// temporary : for user to see user id and pass of all accounts to explore all features of app\n      //this.alertFirstTime()\n    });\n  }\n\n  alertFirstTime() {\n    if (this.state.firstTimeAlert && !this.state.isLogin) {\n      setTimeout(function () {\n        window.alert(\"To explore the feature of this application here is the temporary id and pass for all account\\n      Admin:\\n          id:admin@gmail.com\\n          pass:admin\\n      Hr:\\n          id:hr@gmail.com\\n          pass:hr\\n      Employee:\\n          id:emp@gmail.com\\n          pass:emp\\n      \");\n      }, 500);\n      this.setState({\n        firstTimeAlert: false\n      });\n    }\n  }\n\n  render() {\n    return (// <div>{this.state.isLogin ? (\n      //   <div>\n      //   <DashboardAdmin data={this.state.data}/>\n      //   </div>\n      // ) : (\n      // <Login\n      //   onSubmit={this.handleSubmit}\n      //   loading={this.state.loading}\n      //   pass={this.state.pass}\n      // />\n      // )}</div>\n      //  <DashboardAdmin data={this.state.data}/>\n      //  <DashboardHR  data={this.state.data}/>\n      //  <DashboardEmployee   data={this.state.data}/>\n      //  <Temp />\n      // <NotFound404/>\n      React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/login\",\n        render: props => this.state.data[\"Account\"] == 1 ? // <Dashboard />\n        React.createElement(Redirect, {\n          to: \"/admin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }) : // <Login OnLogin={this.handleLogin}/>\n        this.state.data[\"Account\"] == 2 ? // <Dashboard />\n        React.createElement(Redirect, {\n          to: \"/hr\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }) : //\n        this.state.data[\"Account\"] == 3 ? // <Dashboard />\n        React.createElement(Redirect, {\n          to: \"/employee\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }) : React.createElement(Login, {\n          onSubmit: this.handleSubmit,\n          loading: this.state.loading,\n          pass: this.state.pass,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(Route // exact\n      , {\n        path: \"/admin\",\n        render: props => this.state.data[\"Account\"] == 1 ? React.createElement(DashboardAdmin, {\n          data: this.state.data,\n          onLogout: this.handleLogout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }) : React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(Route // exact\n      , {\n        path: \"/hr\",\n        render: props => this.state.data[\"Account\"] == 2 ? React.createElement(DashboardHR, {\n          data: this.state.data,\n          onLogout: this.handleLogout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }) : React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(Route // exact\n      , {\n        path: \"/employee\",\n        render: props => this.state.data[\"Account\"] == 3 ? React.createElement(DashboardEmployee, {\n          data: this.state.data,\n          onLogout: this.handleLogout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }) : React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })))\n    );\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/shruthi/Documents/SEM_1/HR-Management-System/Frontend/src/App.js"],"names":["React","Component","axios","jwt","Login","Temp","NotFound404","DashboardAdmin","DashboardHR","DashboardEmployee","Switch","HashRouter","Router","Route","Link","Redirect","DefaultRoute","history","App","state","data","loading","pass","isLogin","firstTimeAlert","handleSubmit","event","preventDefault","setState","login","target","value","reset","handleLogout","console","log","localStorage","clear","componentDidMount","id","bodyLogin","email","password","post","then","res","decode","decodedData","setItem","undefined","Account","push","_id","catch","err","getItem","Name","alertFirstTime","setTimeout","window","alert","render","props"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport jwt from \"jsonwebtoken\";\n\nimport Login from \"./component/Login.jsx\";\nimport Temp from \"./component/Temp.jsx\";\nimport NotFound404 from \"./component/NotFound404.jsx\";\nimport DashboardAdmin from \"./component/admin/DashboardAdmin.jsx\";\nimport DashboardHR from \"./component/hr/DashboardHR.jsx\";\nimport DashboardEmployee from \"./component/employee/DashboardEmployee.jsx\";\nimport { Switch } from \"react-router\";\n\nimport {\n  HashRouter as Router,\n  Route,\n  Link,\n  Redirect,\n  DefaultRoute\n} from \"react-router-dom\";\nimport history from \"./history.js\";\n\nclass App extends Component {\n  state = {\n    data: {},\n    loading: false,\n    pass: true,\n    isLogin: false,\n    firstTimeAlert: true,\n  };\n  componentDidMount() {\n    this.setState({\n      data: {\n        _id: localStorage.getItem(\"_id\") || \"\",\n        Account: localStorage.getItem(\"Account\") || \"\",\n        Name: localStorage.getItem(\"Name\") || \"\"\n      },\n      isLogin: localStorage.getItem(\"isLogin\") == \"true\"\n\n    }, () => {\n      // temporary : for user to see user id and pass of all accounts to explore all features of app\n      //this.alertFirstTime()\n    });\n\n  }\n  alertFirstTime() {\n    if (this.state.firstTimeAlert && !this.state.isLogin) {\n      setTimeout(function () {\n        window.alert(\n          `To explore the feature of this application here is the temporary id and pass for all account\n      Admin:\n          id:admin@gmail.com\n          pass:admin\n      Hr:\n          id:hr@gmail.com\n          pass:hr\n      Employee:\n          id:emp@gmail.com\n          pass:emp\n      `)\n      }, 500);\n\n      this.setState({ firstTimeAlert: false });\n    }\n  }\n  render() {\n    return (\n      // <div>{this.state.isLogin ? (\n      //   <div>\n\n      //   <DashboardAdmin data={this.state.data}/>\n      //   </div>\n      // ) : (\n      // <Login\n      //   onSubmit={this.handleSubmit}\n      //   loading={this.state.loading}\n      //   pass={this.state.pass}\n      // />\n      // )}</div>\n      //  <DashboardAdmin data={this.state.data}/>\n      //  <DashboardHR  data={this.state.data}/>\n      //  <DashboardEmployee   data={this.state.data}/>\n      //  <Temp />\n      // <NotFound404/>\n      < Router >\n\n        <Switch>\n          <Route\n            exact\n            path=\"/login\"\n            render={props =>\n              this.state.data[\"Account\"] == 1 ? (\n                // <Dashboard />\n                <Redirect to=\"/admin\" />\n              ) : // <Login OnLogin={this.handleLogin}/>\n\n                this.state.data[\"Account\"] == 2 ? (\n                  // <Dashboard />\n                  <Redirect to=\"/hr\" />\n                ) : //\n                  this.state.data[\"Account\"] == 3 ? (\n                    // <Dashboard />\n                    <Redirect to=\"/employee\" />\n                  ) : (\n                      <Login\n                        onSubmit={this.handleSubmit}\n                        loading={this.state.loading}\n                        pass={this.state.pass}\n                      />\n                    )\n            }\n          />\n          <Route\n            // exact\n            path=\"/admin\"\n            render={props =>\n              this.state.data[\"Account\"] == 1 ? (\n                <DashboardAdmin\n                  data={this.state.data}\n                  onLogout={this.handleLogout}\n                />\n              ) : (\n                  <Redirect to=\"/login\" />\n                )\n            }\n          />\n          <Route\n            // exact\n            path=\"/hr\"\n            render={props =>\n              this.state.data[\"Account\"] == 2 ? (\n                <DashboardHR\n                  data={this.state.data}\n                  onLogout={this.handleLogout}\n                />\n              ) : (\n                  <Redirect to=\"/login\" />\n                )\n            }\n          />\n          <Route\n            // exact\n            path=\"/employee\"\n            render={props =>\n              this.state.data[\"Account\"] == 3 ? (\n                <DashboardEmployee\n                  data={this.state.data}\n                  onLogout={this.handleLogout}\n                />\n              ) : (\n                  <Redirect to=\"/login\" />\n                )\n            }\n          />\n          {/* <Route path=\"/\" render={() => <Redirect to=\"/login\" />} />\n          <Route\n            render={() => (\n              //  <h1>Not Found app.JS</h1>\n              <Redirect to=\"/login\" />\n            )}\n          /> */}\n          <Redirect to=\"/login\" />\n        </Switch>\n      </Router >\n    );\n  }\n  handleSubmit = event => {\n    event.preventDefault();\n    // console.log(\"id\", event.target[0].value);\n    this.setState({ pass: true });\n    this.setState({ loading: true });\n    this.login(event.target[0].value, event.target[1].value);\n    event.target.reset();\n  };\n  handleLogout = event => {\n    console.log(\"logout\");\n    localStorage.clear();\n    this.componentDidMount();\n  };\n  login = (id, pass) => {\n    // history.push('new/path/here/');\n\n    // history.push('/page');\n    // History.push('/page');\n    // this.context.history.push('/path');\n\n    //email=admin@fenil.com&password=admin\n\n    let bodyLogin = {\n      email: id,\n      password: pass\n    };\n    // let bodyLogin =\"email=\"+id+\"&password=\"+pass;\n    // {Email: id, Password: pass}\n\n    axios\n      .post(\"http://localhost:4000\" + \"/api/login\", bodyLogin)\n      .then(res => {\n        // console.log(decodedData.Account);\n        console.log(jwt.decode(res.data));\n        var decodedData = jwt.decode(res.data);\n        localStorage.setItem(\"token\", res.data);\n\n        if (\n          (res == undefined ||\n            res == null ||\n            decodedData.Account == undefined ||\n            decodedData.Account == null) &&\n          !(\n            decodedData.Account == 1 ||\n            decodedData.Account == 2 ||\n            decodedData.Account == 3\n          )\n        ) {\n          this.setState({ pass: false });\n          this.setState({ loading: false });\n        } else {\n          if (decodedData.Account == 1) {\n            // this.setState({ data: decodedData });\n            // localStorage.setItem('data', JSON.stringfy(decodedData));\n\n            this.setState({ pass: true });\n            // localStorage.setItem('pass', 'true');\n\n            this.setState({ loading: false });\n            // localStorage.setItem('loading', 'false');\n\n            this.setState({ isLogin: true });\n            localStorage.setItem(\"isLogin\", true);\n\n            // localStorage.setItem('isLogin', 'true');\n            localStorage.setItem(\"Account\", 1);\n            localStorage.setItem(\"_id\", decodedData[\"_id\"]);\n            localStorage.setItem(\n              \"Name\",\n              decodedData[\"FirstName\"] + \" \" + decodedData[\"LastName\"]\n            );\n            this.componentDidMount();\n            history.push(\"#/admin/role\");\n          }\n          if (decodedData.Account == 2) {\n            // this.setState({ data: decodedData });\n\n            this.setState({ pass: true });\n            this.setState({ loading: false });\n            this.setState({ isLogin: true });\n            localStorage.setItem(\"isLogin\", true);\n\n            localStorage.setItem(\"Account\", 2);\n            localStorage.setItem(\"_id\", decodedData[\"_id\"]);\n            localStorage.setItem(\n              \"Name\",\n              decodedData[\"FirstName\"] + \" \" + decodedData[\"LastName\"]\n            );\n            this.componentDidMount();\n\n            history.push(\"#/hr/employee\");\n          }\n          if (decodedData.Account == 3) {\n            // this.setState({ data: decodedData });\n\n            this.setState({ pass: true });\n            this.setState({ loading: false });\n            this.setState({ isLogin: true });\n            localStorage.setItem(\"isLogin\", true);\n\n            localStorage.setItem(\"Account\", 3);\n            localStorage.setItem(\"_id\", decodedData[\"_id\"]);\n            localStorage.setItem(\n              \"Name\",\n              decodedData[\"FirstName\"] + \" \" + decodedData[\"LastName\"]\n            );\n            this.componentDidMount();\n\n            history.push(\"#/employee/\" + decodedData._id + \"/personal-info\");\n          }\n        }\n\n        //  console.log(decodedData);\n        //  console.log(`decodedData.toString()==\"false\" `,decodedData.toString()==\"false\" );\n\n        //  if(decodedData.toString()==\"false\")\n\n        //  { console.log(\"1\");\n        //  this.setState({ pass: false })\n        //  this.setState({ loading: false }); ;\n\n        // }else{\n        //   console.log(\"2\");\n        //   this.setState({ pass: true });\n        //  this.setState({ loading: false });\n        //  this.setState({ data: decodedData});\n        //  this.setState({ isLogin: true });\n\n        // }\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ pass: false });\n        this.setState({ loading: false });\n      });\n\n  };\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}